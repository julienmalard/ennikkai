from ..роорпВро▓роорпН import роирпАроЯрпНроЯро┐рокрпНрокрпБ_ро╡ро╛ро░рпНрокрпНрокрпБро░рпБ


родроХро╡ро▓рпНроХро│рпН = ['ЁЭЛа', 'ЁЭЛб', 'ЁЭЛв', 'ЁЭЛг', 'ЁЭЛд', 'ЁЭЛе', 'ЁЭЛж', '	ЁЭЛз', 'ЁЭЛи', 'ЁЭЛй', 'ЁЭЛк', 'ЁЭЛл', 'ЁЭЛм', 'ЁЭЛн', 'ЁЭЛо', 'ЁЭЛп', 'ЁЭЛ░', 'ЁЭЛ▒', 'ЁЭЛ▓', 'ЁЭЛ│']
роЕроХ_родроХро╡ро▓рпНроХро│рпН = {роЕ: роО for роО, роЕ in enumerate(родроХро╡ро▓рпНроХро│рпН)}


class рокродро┐ройроороорпН(роирпАроЯрпНроЯро┐рокрпНрокрпБ_ро╡ро╛ро░рпНрокрпНрокрпБро░рпБ):

    def роОрогрпНрогрпБроХрпНроХрпБ(родройрпН, роЙро░рпИ, роорпКро┤ро┐="mayab'"):
        роОрогрпН = 0
        neg = роЙро░рпИ.startswith('-')
        if neg:
            роЙро░рпИ = роЙро░рпИ[1:]
        try:
            ent, dec = роЙро░рпИ.split('.')
        except ValueError:
            ent = роЙро░рпИ
            dec = None

        for роЕ in ent:
            роОрогрпН *= 20
            роОрогрпН += роЕроХ_родроХро╡ро▓рпНроХро│рпН[роЕ]

        if dec is not None:
            f = 20
            for i, роЕ in enumerate(dec):
                роОрогрпН += роЕроХ_родроХро╡ро▓рпНроХро│рпН[роЕ]/f
                f *= 20
        if neg:
            роОрогрпН *= -1

        return роОрогрпН

    def роЙро░рпИроХрпНроХрпБ(родройрпН, роОрогрпН, роорпКро┤ро┐="mayab'", роорпКро┤ро┐_роорпВро▓роорпН=None, родро│роорпН=None):
        import math
        if роОрогрпН == 0:
            return родроХро╡ро▓рпНроХро│рпН[0]
        elif роОрогрпН < 0:
            neg = True
        else:
            neg = False
        neg = роОрогрпН < 0
        роОрогрпН = abs(роОрогрпН)
        ent = floor(роОрогрпН)
        try:
            dec = float('0.' + str(роОрогрпН).split('.')[1])
        except IndexError:
            dec = None

        n_p = math.floor(math.log(ent, 20)) + 1
        роЙро░рпИ = [родроХро╡ро▓рпНроХро│рпН[0]] * n_p
        for i in range(n_p):
            p = n_p - i - 1
            v = int(ent / (20 ** p))
            роЙро░рпИ[i] = родроХро╡ро▓рпНроХро│рпН[v]
            ent -= v * 20**p
        роЙро░рпИ = ''.join(роЙро░рпИ)

        if dec is not None:
            роЙро░рпИ += '.'
            while dec != 0:
                dec *= 20
                dec = round(dec, 5)
                роЙро░рпИ+= родроХро╡ро▓рпНроХро│рпН[int(dec)]
                dec -= int(dec)
        if neg:
            роЙро░рпИ = '-' + роЙро░рпИ
        return роЙро░рпИ

    def роорпКро┤ро┐роХро│рпН(родройрпН):
        return ["mayab'"]

    def ро╡ро┤ро╡рпЖро│ро┐(родройрпН, роорпКро┤ро┐=None):
        raise ValueError

